{% extends "base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'questionpapers/css/question.css' %}">

<div id="exam">
  <h3>{{ paper.title }}</h3>
  <div id="timer">Time left: <span id="time_display"></span></div>
  <div id="progress">Question {{ q_index|add:1 }} of {{ q_total }}</div>

  <div id="question-container">
    {% include "questionpapers/question_fragment.html" %}
  </div>
</div>

<!-- Full Image Overlay -->
<div id="full-image-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:9999;">
  <span id="close-full-image" style="position:absolute; top:20px; right:30px; font-size:40px; color:white; cursor:pointer;">&times;</span>
  <img id="full-image-display" src="" style="max-width:90%; max-height:90%;"/>
</div>

<!-- Include JS -->
<script src="{% static 'js/question_navigation.js' %}"></script>

<script>
  window.paperConfig = {
    paperId: {{ paper.id }},
    totalQuestions: {{ q_total }},
    remainingSeconds: {{ remaining_seconds|default:0 }},
    finalSubmitUrl: "{% url 'questionpapers:final_submit' paper.id %}",   // template tag processed
    paperResultUrl: "{% url 'questionpapers:paper_result' pk=0 %}".replace('0', 'ATTEMPT_ID') // placeholder
  };
</script>


{% endblock %}
